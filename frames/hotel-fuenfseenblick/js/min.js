!function($,window,document,undefined){function Plugin(element,options){this.element=element,this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.maxSlides=this.options.images.length,this.init()}function has3DTransforms(){var has3d,el=document.createElement("p"),transforms={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform"};document.body.insertBefore(el,null);for(var t in transforms)el.style[t]!==undefined&&(el.style[t]="translate3d(1px,1px,1px)",has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]));return document.body.removeChild(el),has3d!==undefined&&has3d.length>0&&"none"!==has3d}var pluginName="Kenburns",defaults={images:[],corners:[],duration:400,fadeSpeed:500,scale:1,ease3d:"cubic-bezier(.81, 0, .26, 1)",onLoadingComplete:function(){},onSlideComplete:function(){},onListComplete:function(){},getSlideIndex:function(){return currentSlide}},imagesObj={},currentSlide=0;Plugin.prototype.init=function(){var list=this.options.images;this.width=$(this.element).width(),this.height=$(this.element).height(),this.has3d=has3DTransforms();for(i in list)imagesObj["image"+i]={},imagesObj["image"+i].loaded=!1,this.attachImage(list[i],"image"+i,i);var loader=$("<div/>");loader.addClass("loader"),loader.css({position:"absolute","z-index":1e4}),$(this.element).prepend(loader)},Plugin.prototype.attachImage=function(url,alt_text,index){var that=this,wrapper=$("<div/>");wrapper.attr("class","kb-slide"),wrapper.css({opacity:0});var img=$("<img />");img.attr("src",url),img.attr("alt",alt_text),wrapper.html(img),this.has3d&&(img.css({"-webkit-transform-origin":"left top"}),img.css({"-moz-transform-origin":"left top"}),img.css({"-webkit-transform":"scale("+that.options.scale+") translate3d(0,0,0)"}),img.css({"-moz-transform":"scale("+that.options.scale+") translate3d(0,0,0)"})),this.doTransition=this.has3d?this.transition3d:this.transition,img.load(function(){imagesObj["image"+index].element=this,imagesObj["image"+index].loaded=!0,imagesObj["image"+index].width=$(this).width(),imagesObj["image"+index].width=$(this).height(),that.insertAt(index,wrapper),that.resume(index)})},Plugin.prototype.resume=function(index){0==index&&(this.startTransition(0),$(this.element).find(".loader").hide()),index==this.holdup&&($("#status").html(""),$(this.element).find(".loader").hide(),this.startTransition(this.holdup)),1==this.checkLoadProgress()&&($(this.element).find(".stalled").each(function(){$(this).css({opacity:1,"z-index":1}),$(this).removeClass("stalled")}),this.options.onLoadingComplete())},Plugin.prototype.checkLoadProgress=function(){var imagesLoaded=!0;for(i=0;i<this.maxSlides;i++)0==imagesObj["image"+i].loaded&&(imagesLoaded=!1);return imagesLoaded},Plugin.prototype.wait=function(){clearInterval(this.interval),$("#status").html("loading"),$(this.element).find(".loader").show();var image=imagesObj["image"+(currentSlide-1)].element;$(image).parent().stop(!0,!0),$(image).parent().addClass("stalled")},Plugin.prototype.startTransition=function(start_index){var that=this;currentSlide=start_index,that.doTransition(),this.interval=setInterval(function(){currentSlide<that.maxSlides-1?currentSlide++:currentSlide=0,0==imagesObj["image"+currentSlide].loaded?(that.holdup=currentSlide,that.wait()):that.doTransition()},this.options.duration)},Plugin.prototype.chooseCorner=function(){var scale=this.options.scale,image=imagesObj["image"+currentSlide].element,ratio=image.height/image.width,sw=Math.floor($(this.element).width()*(1/scale)),sh=Math.floor($(this.element).width()*ratio*(1/scale));$(image).width(sw),$(image).height(sh);var start,end,w=$(this.element).width(),h=$(this.element).height();if(this.options.corners[currentSlide])start=this.options.corners[currentSlide][0],end=this.options.corners[currentSlide][1];else{var corners=[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}],choice=Math.floor(4*Math.random());start=corners[choice],corners.splice(choice,1),end=corners[Math.floor(3*Math.random())]}var coordinates={startX:start.x*(w-sw*scale),startY:start.y*(h-sh*scale),endX:end.x*(w-sw),endY:end.y*(h-sh)};return coordinates},Plugin.prototype.transition3d=function(){var that=this,scale=this.options.scale,image=imagesObj["image"+currentSlide].element,position=this.chooseCorner();$(image).css({"-webkit-transition":"none"}),$(image).css({"-moz-transition":"none"}),$(image).css({"-webkit-transform":"scale("+scale+") translate3d("+position.startX+"px,"+position.startY+"px,0)"}),$(image).css({"-moz-transform":"scale("+scale+") translate3d("+position.startX+"px,"+position.startY+"px,0)"}),$(image).parent().css({opacity:0,"z-index":"3"}),$(image).parent().animate({opacity:1},that.options.fadeSpeed),$(image).css({"-webkit-transition":"-webkit-transform "+(that.options.duration+that.options.fadeSpeed)+"ms "+that.options.ease3d}),$(image).css({"-moz-transition":"-moz-transform "+(that.options.duration+that.options.fadeSpeed)+"ms "+that.options.ease3d}),$(image).css({"-webkit-transform":"scale(1) translate3d("+position.endX+"px,"+position.endY+"px,0)"}),$(image).css({"-moz-transform":"scale(1) translate3d("+position.endX+"px,"+position.endY+"px,0)"}),this.transitionOut(),this.options.onSlideComplete()},Plugin.prototype.transition=function(){var that=this,scale=this.options.scale,image=imagesObj["image"+currentSlide].element,sw=$(image).width(),sh=$(image).height(),position=this.chooseCorner();$(image).css({left:position.startX,top:position.startY,width:sw*scale,height:sh*scale}),$(image).animate({left:position.endX,top:position.endY,width:sw,height:sh},that.options.duration+that.options.fadeSpeed),$(image).parent().css({opacity:0,"z-index":3}),$(image).parent().animate({opacity:1},that.options.fadeSpeed),this.transitionOut(),this.options.onSlideComplete()},Plugin.prototype.transitionOut=function(){var that=this,image=imagesObj["image"+currentSlide].element;$(image).parent().delay(that.options.duration).animate({opacity:0},that.options.fadeSpeed,function(){$(this).css({"z-index":1})})},Plugin.prototype.insertAt=function(index,element){var lastIndex=$(this.element).children().size();0>index&&(index=Math.max(0,lastIndex+1+index));$(this.element).append(element);lastIndex>index&&$(this.element).children().eq(index).before($(this.element).children().last())},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);var corners={LT:{x:0,y:0},RT:{x:1,y:0},LB:{x:0,y:1},RB:{x:1,y:1}};$(document).ready(function(){$("#kenburns-slideshow").Kenburns({images:["images/10.jpg","images/20.jpg","images/30.jpg","images/40.jpg","images/50.jpg","images/60.jpg","images/70.jpg","images/80.jpg"],corners:[[corners.LT,{x:.5,y:.8}],[corners.LT,{x:.25,y:.5}],[corners.LT,{x:.55,y:.5}],[corners.LT,{x:.4,y:.6}],[corners.LT,{x:.4,y:.5}]],scale:.75,duration:9500,fadeSpeed:2500,ease3d:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",onSlideComplete:function(){},onLoadingComplete:function(){}})});